package logger

import (
"log/slog"
"os"
"strings"
)

// New creates a slog.Logger based on configuration.
func New(level string, json bool) *slog.Logger {
var lvl slog.Level
switch strings.ToLower(level) {
case "debug":
lvl = slog.LevelDebug
case "warn", "warning":
lvl = slog.LevelWarn
case "error":
lvl = slog.LevelError
default:
lvl = slog.LevelInfo
}

opts := &slog.HandlerOptions{Level: lvl}
var handler slog.Handler
if json {
handler = slog.NewJSONHandler(os.Stdout, opts)
} else {
handler = slog.NewTextHandler(os.Stdout, opts)
}

return slog.New(handler)
}
